LAYERS (
	lamp_castel;
	cart_castel_class5;
)

municipality -> MUNICIPALITY <contains> pip;
municipality -> MUNICIPALITY <contains> roadNetwork;

pip -> lamps;
lamps -> lamps<contains>lamp;
lamps -> lamp;

lamp -> LAMP
DELTA: (
  DB layer=lamp_castel,
  DR lamp = LAMP
)
SEMANTICRULE: {"
  void onCreate(){
  }
  
  	public boolean docheck()
	{
		boolean check = true;
		switch road_type:
			case me3a:
				check = check && (lamp_poleplacement == a);
				check = check && (lamp_type  == [a,b]);
				// etc
				break;	
			case me4b:
				break;
			case s3:
				break;
			case ce4:
				break;
			default:
				exception;
		return check;
	}	

"};

roadNetwork -> roads;
roads -> road <touches> roads;
road -> ROAD
DELTA: (
  DB layer=cart_castel_class5,
  DR road = ROAD
)
SEMANTICRULE: {"
  void onCreate(){
  }
"};
        
lamp -> LAMP <place_in> ROAD
DELTA (
DR LAMP_bound = ROAD_bound
)


